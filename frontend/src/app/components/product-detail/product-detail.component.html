<div class="product-detail-container">
  <button class="back-btn" (click)="goBack()">
    <i class="fas fa-arrow-left"></i> Quay lại
  </button>
  
  <div *ngIf="loading" class="loading">Đang tải...</div>
  <div *ngIf="error" class="error">{{ error }}</div>
  
  <div *ngIf="product && !loading" class="product-detail">
    <div class="product-image">
      <img [src]="getImageUrl(product)" [alt]="product.name" (error)="onImageError($event)" />
    </div>
    
    <div class="product-info">
      <h1 class="product-title">{{ product.name }}</h1>
      <p class="product-price">{{ product.price | currency:'VND':'symbol':'1.0-0' }}</p>
      <div class="product-description">
        <h3>Mô tả sản phẩm</h3>
        <p>{{ product.description || 'Chưa có mô tả' }}</p>
      </div>
      <div class="product-stock" *ngIf="product.stock !== undefined">
        <span class="stock-label">Kho:</span>
        <span class="stock-value" [ngClass]="getStockClass(product.stock)">{{ product.stock }} sản phẩm</span>
      </div>
      <div class="product-actions">
        <div class="quantity-selector">
          <label>Số lượng:</label>
          <button (click)="decreaseQuantity()" [disabled]="selectedQuantity <= 1">-</button>
          <span>{{ selectedQuantity }}</span>
          <button (click)="increaseQuantity()" [disabled]="selectedQuantity >= product.stock">+</button>
        </div>
        <button class="add-to-cart-btn" (click)="addToCart()" [disabled]="addingToCart">
          {{ addingToCart ? 'Đang thêm...' : 'Thêm vào giỏ hàng' }}
        </button>
        <button class="buy-now-btn" (click)="buyNow()" [disabled]="buyingNow">
          {{ buyingNow ? 'Đang xử lý...' : 'Mua ngay' }}
        </button>
      </div>
    </div>
  </div>
  
  <!-- Reviews Section -->
  <app-reviews *ngIf="product" [productId]="product.id"></app-reviews>
</div>